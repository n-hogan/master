@{
    ViewBag.Title = "Index";
}


@section JavaScript{
    <script>
        function person2(id, name) {

            debugger;
            var self = this;
            self.id = ko.observable(id);
            self.name = ko.observable(name);
        }

        function person(pers) {
            var self = this;

            self.id = ko.observable(pers.Id);
            self.name = ko.observable(pers.Name);
        };

        function peopleViewModel() {
            var self = this;
            self.people = ko.observableArray([]);


            var peopleHub = $.connection.peopleHub;
            $.connection.hub.start().done(function() {
                peopleHub.server.getAll().done(function (data) {
                    debugger;

                    self.people($.map(data, function(item) {

                        return new person(item);
                    }));

                    self.people.push(new person2(22, "barry"));


                });
            });

        };

        $(function() {

            debugger;
            var vm = new peopleViewModel();
            debugger;
            ko.applyBindings(vm);
            debugger;
            vm.people.push(new person2(3, "Matt"));

            ko.applyBindings(vm);
        });


    </script>
   
}

<p>Test</p>

<table>
    <tbody data-bind="foreach: people">
        <tr>
            <td data-bind="text: id"></td>
            <td data-bind="text: name"></td>

        </tr>
    </tbody>
</table>









